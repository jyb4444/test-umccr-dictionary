$schema: "http://json-schema.org/draft-04/schema#"

id: "flow_cytometry_assay"
title: Flow Cytometry Assay
type: object
category: biospecimen
program: '*'
project: '*'
description: >
  description of a flow cytometry assay.
additionalProperties: false
submittable: true
validators: null

systemProperties: 
  - id
  - project_id
  - state
  - created_datetime
  - updated_datetime

required:
  - type
  - submitter_id
#  - provenance

uniqueKeys:
  - [id]
  - [project_id, submitter_id]

links:
  - name: aliquots
    backref: flow_cytometry_assays
    label: member_of
    target_type: aliquot
    multiplicity: many_to_many
    required: true

properties: 
  type:
    enum: ["flow_cytometry_assay"]
    description: "The node type, which must be 'flow_cytometry_assay'. Used for schema validation."
  id:
    $ref: "_definitions.yaml#/UUID"
  submitter_id:
    type: string
    description: ""
  protocol:
    type: string
    description: "A brief description of the flow cytometry protocol"  
  protocol_doi:
    type: string
    description: "DOI link to the protocol, if available."    
  quality_control_measures:
    $ref: "_definitions.yaml#/quality_control_measures"
  staining_protocol:
    type: string
    description: "Description of the staining process."
  staining_protocol_doi:
    type: string
    description: "DOI for the staining protocol."
  characteristics_being_measured: 
    type: string
    description: "Biological or chemical properties evaluated (e.g., apoptosis, CD25)."
  analyte: 
    type: string
    description: "The target of interest measured in the assay (e.g., CD3, DNA content)."
  analyte_detector: 
    type: string
    description: "Target bound by the detection reagent (e.g., anti-CD25)."
  analyte_reporter:
    type: string
    description: "Fluorochrome used to report analyte presence (e.g., FITC)."
  clone: 
    type: string
    description: "Monoclonal antibody clone name, if applicable."
  reagent_manufacturer: 
    type: string
    description: "Name of the reagent supplier."
  reagent_catalogue:
    type: string
    description: "Catalog number of the reagent used."
  staining_status: 
    $ref: "_definitions.yaml#/staining_status"
  other_reagent: 
    type: string
    description: "Details of any secondary reagents or labels used."
  provenance: 
    type: string
    description: "Template version used to define this metadata record."
  aliquots:
    $ref: "_definitions.yaml#/to_many"    
  instruments_submitter_id:
    #$ref: "_definitions.yaml#/to_many"
    type: string
    description: "Submitter-assigned ID for the flow cytometry instrument."
  state:
    $ref: "_definitions.yaml#/state"
  project_id:
    $ref: "_definitions.yaml#/project_id"
  created_datetime:
    $ref: "_definitions.yaml#/datetime"
  updated_datetime:
    $ref: "_definitions.yaml#/datetime"